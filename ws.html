<!DOCTYPE html>
<html>
<head>
    <title>Test WebSocket</title>
    <script type="text/javascript">
        var ws;

        function connect() {
            var url = "ws://192.168.31.10/ws";

            ws = new WebSocket(url);

            ws.onopen = function () {
                console.log("Connecté");
                sendRouesMessage(0, 0, 0, 0); // Initialiser avec toutes les roues à 500
            };

            ws.onmessage = function (event) {
                console.log("Message reçu: ", event.data);
            };

            ws.onclose = function () {
                console.log("Déconnecté");
            };

            ws.onerror = function (err) {
                console.log("Erreur: ", err);
            };
        }

        function sendRouesMessage(frontLeft, frontRight, backLeft, backRight) {
            console.log("Envoi du message: ", frontLeft, frontRight, backLeft, backRight);
            var message = {

                "cmd": 1,
                "data": [frontLeft, backLeft, frontRight, backRight]

            };
            console.log("Envoi du message: ", message);
            ws.send(JSON.stringify(message));
        }

        function front() {
            sendRouesMessage(2000, 2000, 2000, 2000);
        }

        function back() {
            sendRouesMessage(-500, -500, -500, -500);
        }

        function left() {
            sendRouesMessage(-500, 500, -500, 500);
        }

        function right() {
            sendRouesMessage(500, -500, 500, -500);
        }

        function CamOn() {
            var message = {
                "cmd": 9,
                "data": 1
            };
            console.log("Envoi du message: ", message);
            ws.send(JSON.stringify(message));
        }

        function CamOff() {
            var message = {
                "cmd": 9,
                "data": 0
            };
            console.log("Envoi du message: ", message);
            ws.send(JSON.stringify(message));
        }

        function sendHeadMessage() {
            var x = document.getElementById('inputX').value;
            var y = document.getElementById('inputY').value;
            var message = {
                "cmd": 3,
                "data": [x, y]
            };
            console.log("Envoi du message: ", message);
            ws.send(JSON.stringify(message));
        }

        function sendHeadFace() {
            var x = document.getElementById('inputX').value;
            var message = {
                "cmd": 2,
                "data": x
            };
            console.log("Envoi du message: ", message);
            ws.send(JSON.stringify(message));
        }

    </script>
</head>
<body>
<button onclick="connect()">Connecter</button>
<button onclick="front()">front</button>
<button onclick="back()">back</button>
<button onclick="left()">left</button>
<button onclick="right()">right</button>

<button onclick="sendRouesMessage(0, 0, 0, 0)">stop</button>
<button onclick="CamOn()">cam on</button>
<button onclick="CamOff()">cam Off</button>
<input type="range" min="30" max="150" value="90" id="inputX" oninput="sendHeadMessage()">
<input type="range" min="30" max="150" value="90" id="inputY" oninput="sendHeadMessage()">
<input type="number" id="inputX" placeholder="Entrez X" oninput="sendHeadFace()" value="0">


</body>
</html>